define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(e,s,t){"use strict";function n(e){e=(new Date).toLocaleString("en-us",e);return 1==e.length?"0"+e:e}function o(){this.snippetMap={},this.snippetNameMap={}}var i=e("./lib/dom"),a=e("./lib/oop"),c=e("./lib/event_emitter").EventEmitter,p=e("./lib/lang"),l=e("./range").Range,h=e("./range_list").RangeList,r=e("./keyboard/hash_handler").HashHandler,d=e("./tokenizer").Tokenizer,u=e("./clipboard"),g={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,n){e=e.session.getTextRange();return n?e.replace(/\n\r?([ \t]*\S)/g,"\n"+n+"$1"):e},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return u.getText&&u.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){e=e.session.$mode||{};return e.blockComment&&e.blockComment.start||""},BLOCK_COMMENT_END:function(e){e=e.session.$mode||{};return e.blockComment&&e.blockComment.end||""},LINE_COMMENT:function(e){return(e.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:n.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:n.bind(null,{year:"2-digit"}),CURRENT_MONTH:n.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:n.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:n.bind(null,{month:"short"}),CURRENT_DATE:n.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:n.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:n.bind(null,{weekday:"short"}),CURRENT_HOUR:n.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:n.bind(null,{minute:"2-digit"}),CURRENT_SECOND:n.bind(null,{second:"2-digit"})},f=(g.SELECTED_TEXT=g.SELECTION,!function(){a.implement(this,c),this.getTokenizer=function(){return o.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function i(e){return e=e.substr(1),/^\d+$/.test(e)?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function e(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var t={regex:"/("+e("/")+"+)/",onMatch:function(e,t,n){n=n[0];return n.fmtString=!0,n.guard=e.slice(1,-1),n.flag=""},next:"formatString"};return o.$tokenizer=new d({start:[{regex:/\\./,onMatch:function(e,t,n){var i=e[1];return[e="}"==i&&n.length||-1!="`$\\".indexOf(i)?i:e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:i},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,t,n){e=i(e.substr(1));return n.unshift(e[0]),e},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+e("\\|")+"*\\|",onMatch:function(e,t,n){e=e.slice(1,-1).replace(/\\[,|\\]|,/g,function(e){return 2==e.length?e[1]:"\0"}).split("\0").map(function(e){return{value:e}});return[(n[0].choices=e)[0]]},next:"start"},t,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectElse?(n[0].expectElse=!1,n[0].ifEnd={elseEnd:n[0]},[n[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,n){var i=e[1];return"}"==i&&n.length||-1!="`$\\".indexOf(i)?e=i:"n"==i?e="\n":"t"==i?e="\t":-1!="ulULE".indexOf(i)&&(e={changeCase:i,local:"a"<i}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,n){n=n.shift();return n&&(n.flag=e.slice(1,-1)),this.next=n&&n.tabstopId?"start":"",[n||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,n){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,n){e={text:e.slice(2)};return n.unshift(e),[e]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,n){n=n.shift();return this.next=n&&n.tabstopId?"start":"",[n||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,n){return n[0].formatFunction=e.slice(2,-1),[n.shift()]},next:"formatString"},t,{regex:/:[\?\-+]?/,onMatch:function(e,t,n){"+"==e[1]&&(n[0].ifEnd=n[0]),"?"==e[1]&&(n[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]})},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.getVariableValue=function(e,t,n){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var i=this.variables[t];return null==(i="function"==typeof i?this.variables[t](e,t,n):i)?"":i},this.variables=g,this.tmStrFormat=function(e,t,s){if(!t.fmt)return e;var n=t.flag||"",i=t.guard,i=new RegExp(i,n.replace(/[^gim]/g,"")),a="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,c=this;return e.replace(i,function(){for(var e=c.variables.__,t=(c.variables.__=[].slice.call(arguments),c.resolveVariables(a,s)),n="E",i=0;i<t.length;i++){var o,r=t[i];"object"==typeof r?(t[i]="",r.changeCase&&r.local?(o=t[i+1])&&"string"==typeof o&&("u"==r.changeCase?t[i]=o[0].toUpperCase():t[i]=o[0].toLowerCase(),t[i+1]=o.substr(1)):r.changeCase&&(n=r.changeCase)):"U"==n?t[i]=r.toUpperCase():"L"==n&&(t[i]=r.toLowerCase())}return c.variables.__=e,t.join("")})},this.tmFormatFunction=function(e,t,n){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},this.resolveVariables=function(t,e){function n(e){e=t.indexOf(e,s+1);-1!=e&&(s=e)}for(var i=[],o="",r=!0,s=0;s<t.length;s++){var a,c=t[s];"string"==typeof c?(i.push(c),"\n"==c?(r=!0,o=""):r&&(o=/^\t*/.exec(c)[0],r=/\S/.test(c))):c&&(r=!1,c.fmtString&&(-1==(a=t.indexOf(c,s+1))&&(a=t.length),c.fmt=t.slice(s+1,a),s=a),c.text?(a=this.getVariableValue(e,c.text,o)+"",c.fmtString&&(a=this.tmStrFormat(a,c,e)),(a=c.formatFunction?this.tmFormatFunction(a,c,e):a)&&!c.ifEnd?(i.push(a),n(c)):!a&&c.ifEnd&&n(c.ifEnd)):c.elseEnd?n(c.elseEnd):null==c.tabstopId&&null==c.changeCase||i.push(c))}return i};function r(e,t,n){var i=e.getCursorPosition(),o=e.session.getLine(i.row),r=e.session.getTabString(),s=o.match(/^\s*/)[0],a=(i.column<s.length&&(s=s.slice(0,i.column)),t=t.replace(/\r/g,""),this.tokenizeTmSnippet(t));a=(a=this.resolveVariables(a,e)).map(function(e){return"\n"==e?e+s:"string"==typeof e?e.replace(/\t/g,r):e});for(var c=[],p=(a.forEach(function(e,t){var n,i;"object"==typeof e&&(i=e.tabstopId,(n=c[i])||((n=c[i]=[]).index=i,n.value="",n.parents={}),-1===n.indexOf(e)&&(e.choices&&!n.choices&&(n.choices=e.choices),n.push(e),-1!==(i=a.indexOf(e,t+1))&&((e=a.slice(t+1,i)).some(function(e){return"object"==typeof e})&&!n.value?n.value=e:!e.length||n.value&&"string"==typeof n.value||(n.value=e.join("")))))}),c.forEach(function(e){e.length=0}),{}),l=0;l<a.length;l++){var h,d,u,g=a[l];"object"==typeof g&&(u=g.tabstopId,h=c[u],d=a.indexOf(g,l+1),p[u]?p[u]===g&&(delete p[u],Object.keys(p).forEach(function(e){h.parents[e]=!0})):(p[u]=g,"string"!=typeof(u=h.value)?u=function(e){for(var t=[],n=0;n<e.length;n++){if("object"==typeof(i=e[n])){if(p[i.tabstopId])continue;var i=t[e.lastIndexOf(i,n-1)]||{tabstopId:i.tabstopId}}t[n]=i}return t}(u):g.fmt&&(u=this.tmStrFormat(u,g,e)),a.splice.apply(a,[l+1,Math.max(0,d-l)].concat(u,g)),-1===h.indexOf(g)&&h.push(g)))}var f=0,m=0,b="";return a.forEach(function(e){var t;"string"==typeof e?(1<(t=e.split("\n")).length?(m=t[t.length-1].length,f+=t.length-1):m+=e.length,b+=e):e&&(e.start?e.end={row:f,column:m}:e.start={row:f,column:m})}),{text:b,tabstops:c,tokens:a}}this.getDisplayTextForSnippet=function(e,t){return r.call(this,e,t).text},this.insertSnippetForSelection=function(e,t,n){var t=r.call(this,e,t),i=e.getSelectionRange(),n=(n&&0===n.compareRange(i)&&(i=n),e.session.replace(i,t.text)),o=new f(e),e=e.inVirtualSelectionMode&&e.selection.index;o.addTabstops(t.tabstops,i.start,n,e)},this.insertSnippet=function(e,t,n){var i=this;if(!n||n instanceof l||(n=l.fromPoints(n.start,n.end)),e.inVirtualSelectionMode)return i.insertSnippetForSelection(e,t,n);e.forEachSelection(function(){i.insertSnippetForSelection(e,t,n)},null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},this.$getScope=function(e){var t,n=e.session.$mode.$id||"";return"html"!==(n=n.split("/").pop())&&"php"!==n||("php"!==n||e.session.$mode.inlinePhp||(n="html"),t=e.getCursorPosition(),(e="object"==typeof(e=e.session.getState(t.row))?e[0]:e).substring&&("js-"==e.substring(0,3)?n="javascript":"css-"==e.substring(0,4)?n="css":"php-"==e.substring(0,4)&&(n="php"))),n},this.getActiveScopes=function(e){var e=this.$getScope(e),t=[e],n=this.snippetMap;return n[e]&&n[e].includeScopes&&t.push.apply(t,n[e].includeScopes),t.push("_"),t},this.expandWithTab=function(e,t){var n=this,i=e.forEachSelection(function(){return n.expandSnippetForSelection(e,t)},null,{keepOrder:!0});return i&&e.tabstopManager&&e.tabstopManager.tabNext(),i},this.expandSnippetForSelection=function(e,t){var n,i=e.getCursorPosition(),o=e.session.getLine(i.row),r=o.substring(0,i.column),s=o.substr(i.column),a=this.snippetMap;return this.getActiveScopes(e).some(function(e){e=a[e];return!!(n=e?this.findMatchingSnippet(e,r,s):n)},this),!!n&&(t&&t.dryRun||(e.session.doc.removeInLine(i.row,i.column-n.replaceBefore.length,i.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null),!0)},this.findMatchingSnippet=function(e,t,n){for(var i=e.length;i--;){var o=e[i];if((!o.startRe||o.startRe.test(t))&&((!o.endRe||o.endRe.test(n))&&(o.startRe||o.endRe)))return o.matchBefore=o.startRe?o.startRe.exec(t):[""],o.matchAfter=o.endRe?o.endRe.exec(n):[""],o.replaceBefore=o.triggerRe?o.triggerRe.exec(t)[0]:"",o.replaceAfter=o.endTriggerRe?o.endTriggerRe.exec(n)[0]:"",o}},this.snippetMap={},this.snippetNameMap={},this.register=function(t,i){function o(e){return(e=e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)?"(?:"+e+")":e)||""}function r(e,t,n){return e=o(e),t=o(t),n?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function n(e){e.scope||(e.scope=i||"_"),i=e.scope,s[i]||(s[i]=[],a[i]={});var t,n=a[i];e.name&&((t=n[e.name])&&c.unregister(t),n[e.name]=e),s[i].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=p.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=r(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=r(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}var s=this.snippetMap,a=this.snippetNameMap,c=this;t=t||[],Array.isArray(t)?t.forEach(n):Object.keys(t).forEach(function(e){n(t[e])}),this._signal("registerSnippets",{scope:i})},this.unregister=function(e,n){function t(e){var t=o[e.scope||n];t&&t[e.name]&&(delete t[e.name],0<=(e=(t=i[e.scope||n])&&t.indexOf(e))&&t.splice(e,1))}var i=this.snippetMap,o=this.snippetNameMap;e.content?t(e):Array.isArray(e)&&e.forEach(t)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,n,i,o=[],r={},s=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;n=s.exec(e);){if(n[1])try{r=JSON.parse(n[1]),o.push(r)}catch(e){}n[4]?(r.content=n[4].replace(/^\t/gm,""),o.push(r),r={}):(t=n[2],n=n[3],"regex"==t?(r.guard=(i=/\/((?:[^\/\\]|\\.)*)|$/g).exec(n)[1],r.trigger=i.exec(n)[1],r.endTrigger=i.exec(n)[1],r.endGuard=i.exec(n)[1]):"snippet"==t?(r.tabTrigger=n.match(/^\S*/)[0],r.name||(r.name=n)):t&&(r[t]=n))}return o},this.getSnippetByName=function(t,e){var n,i=this.snippetNameMap;return this.getActiveScopes(e).some(function(e){e=i[e];return!!(n=e?e[t]:n)},this),n}}.call(o.prototype),function(e){if(e.tabstopManager)return e.tabstopManager;(e.tabstopManager=this).$onChange=this.onChange.bind(this),this.$onChangeSelection=p.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)}),m=(!function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){for(var t="r"==e.action[0],n=this.selectedTabstop||{},i=n.parents||{},o=(this.tabstops||[]).slice(),r=0;r<o.length;r++){var s=o[r],a=s==n||i[s.index];if(s.rangeList.$bias=a?0:1,"remove"==e.action&&s!==n)for(var a=s.parents&&s.parents[n.index],c=(c=s.rangeList.pointIndex(e.start,a))<0?-c-1:c+1,a=(a=s.rangeList.pointIndex(e.end,a))<0?-a-1:a-1,p=s.rangeList.ranges.slice(c,a),l=0;l<p.length;l++)this.removeRange(p[l]);s.rangeList.$onChange(e)}var h=this.editor.session;this.$inChange||!t||1!=h.getLength()||h.getValue()||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges&&e.firstNonLinked){this.$inChange=!0;for(var t=this.editor.session,n=t.getTextRange(e.firstNonLinked),i=0;i<e.length;i++){var o,r=e[i];r.linked&&(o=r.original,o=s.snippetManager.tmStrFormat(n,o,this.editor),t.replace(r,o))}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),i=0;i<this.ranges.length;i++)if(!this.ranges[i].linked){var o=this.ranges[i].contains(e.row,e.column),r=n||this.ranges[i].contains(t.row,t.column);if(o&&r)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,e=this.index+(e||1),e=Math.min(Math.max(e,1),t);this.selectTabstop(e=e==t?0:e),0===e&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){e=(this.selectedTabstop=t).firstNonLinked||t;if(t.choices&&(e.cursor=e.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(e);else{var n=this.editor.multiSelect;n.toSingleRange(e);for(var i=0;i<t.length;i++)t.hasLinkedRanges&&t[i].linked||n.addRange(t[i].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(e,s,t){var a=this.useLink||!this.editor.getOption("enableMultiselect");this.$openTabstops||(this.$openTabstops=[]),e[0]||(t=l.fromPoints(t,t),b(t.start,s),b(t.end,s),e[0]=[t],e[0].index=0);var c=[this.index+1,0],p=this.ranges;e.forEach(function(e,t){for(var n=this.$openTabstops[t]||e,i=0;i<e.length;i++){var o=e[i],r=l.fromPoints(o.start,o.end||o.start);m(r.start,s),m(r.end,s),r.original=o,r.tabstop=n,p.push(r),n!=e?n.unshift(r):n[i]=r,o.fmtString||n.firstNonLinked&&a?(r.linked=!0,n.hasLinkedRanges=!0):n.firstNonLinked||(n.firstNonLinked=r)}n.firstNonLinked||(n.hasLinkedRanges=!1),n===e&&(c.push(n),this.$openTabstops[t]=n),this.addTabstopMarkers(n),n.rangeList=n.rangeList||new h,n.rangeList.$bias=0,n.rangeList.addList(n)},this),2<c.length&&(this.tabstops.length&&c.push(c.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,c))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),-1!=(t=this.ranges.indexOf(e))&&this.ranges.splice(t,1),-1!=(t=e.tabstop.rangeList.ranges.indexOf(e))&&e.tabstop.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new r,this.keyboardHandler.bindKeys({Tab:function(e){s.snippetManager&&s.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}})}.call(f.prototype),function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}),b=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row},i=(i.importCssString("\n.ace_snippet-marker {\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    background: rgba(194, 193, 208, 0.09);\n    border: 1px dotted rgba(211, 208, 235, 0.62);\n    position: absolute;\n}","snippets.css",!1),s.snippetManager=new o,e("./editor").Editor);!function(){this.insertSnippet=function(e,t){return s.snippetManager.insertSnippet(this,e,t)},this.expandSnippet=function(e){return s.snippetManager.expandWithTab(this,e)}}.call(i.prototype)}),define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t,n){"use strict";function a(e){return"suggest-aria-id:".concat(e)}function c(e){return(e=new o(e)).$maxLines=4,(e=new r(e)).setHighlightActiveLine(!1),e.setShowPrintMargin(!1),e.renderer.setShowGutter(!1),e.renderer.setHighlightGutterLine(!1),e.$mouseHandler.$focusTimeout=0,e.$highlightTagPending=!0,e}function i(e){function t(){}var n=g.createElement("div"),d=new c(n);function i(){s(-1)}e&&e.appendChild(n),n.style.display="none",d.renderer.content.style.cursor="default",d.renderer.setStyle("ace_autocomplete"),d.renderer.container.setAttribute("role","listbox"),d.renderer.container.setAttribute("aria-label","Autocomplete suggestions"),d.setOption("displayIndentGuides",!1),d.setOption("dragDelay",150),d.focus=t,d.$isFocused=!0,d.renderer.$cursorLayer.restartTimer=t,d.renderer.$cursorLayer.element.style.opacity=0,d.renderer.$maxLines=8,d.renderer.$keepTextAreaAtCursor=!1,d.setHighlightActiveLine(!1),d.session.highlight(""),d.session.$searchHighlight.clazz="ace_highlight-marker",d.on("mousedown",function(e){var t=e.getDocumentPosition();d.selection.moveToPosition(t),r.start.row=r.end.row=t.row,e.stop()});var u,o=new p(-1,0,-1,1/0),r=new p(-1,0,-1,1/0),s=(r.id=d.session.addMarker(r,"ace_active-line","fullLine"),d.setSelectOnHover=function(e){e?o.id&&(d.session.removeMarker(o.id),o.id=null):o.id=d.session.addMarker(o,"ace_line-hover","fullLine")},d.setSelectOnHover(!1),d.on("mousemove",function(e){var t;u?u.x==e.x&&u.y==e.y||((u=e).scrollTop=d.renderer.scrollTop,t=u.getDocumentPosition().row,o.start.row!=t&&(o.id||d.setRow(t),s(t))):u=e}),d.renderer.on("beforeRender",function(){var e;u&&-1!=o.start.row&&(u.$pos=null,e=u.getDocumentPosition().row,o.id||d.setRow(e),s(e,!0))}),d.renderer.on("afterRender",function(){var e=d.getRow(),t=d.renderer.$textLayer,n=t.element.childNodes[e-t.config.firstRow],i=document.activeElement;n!==t.selectedNode&&t.selectedNode&&(g.removeCssClass(t.selectedNode,"ace_selected"),i.removeAttribute("aria-activedescendant"),t.selectedNode.removeAttribute("id")),(t.selectedNode=n)&&(g.addCssClass(n,"ace_selected"),t=a(e),n.id=t,d.renderer.container.setAttribute("aria-activedescendant",t),i.setAttribute("aria-activedescendant",t),n.setAttribute("role","option"),n.setAttribute("aria-label",d.getData(e).value),n.setAttribute("aria-setsize",d.data.length),n.setAttribute("aria-posinset",e))}),function(e,t){e!==o.start.row&&(o.start.row=o.end.row=e,t||d.session._emit("changeBackMarker"),d._emit("changeHoverMarker"))});return d.getHoveredRow=function(){return o.start.row},l.addListener(d.container,"mouseout",i),d.on("hide",i),d.on("changeSelection",i),d.session.doc.getLength=function(){return d.data.length},d.session.doc.getLine=function(e){e=d.data[e];return"string"==typeof e?e:e&&e.value||""},(e=d.session.bgTokenizer).$tokenizeRow=function(e){function t(e,t){e&&i.push({type:(n.className||"")+(t||""),value:e})}var n=d.data[e],i=[];if(!n)return i;for(var o=(n="string"==typeof n?{value:n}:n).caption||n.value||n.name,r=o.toLowerCase(),s=(d.filterText||"").toLowerCase(),a=0,c=0,p=0;p<=s.length;p++)if(p!=c&&(n.matchMask&1<<p||p==s.length)){var l=s.slice(c,p),c=p,h=r.indexOf(l,a);if(-1==h)continue;t(o.slice(a,h),""),a=h+l.length,t(o.slice(h,a),"completion-highlight")}return t(o.slice(a,o.length),""),n.meta&&i.push({type:"completion-meta",value:n.meta}),n.message&&i.push({type:"completion-message",value:n.message}),i},e.$updateOnChange=t,e.start=t,d.session.$computeWidth=function(){return this.screenWidth=0},d.isOpen=!1,d.isTopdown=!1,d.autoSelect=!0,d.filterText="",d.data=[],d.setData=function(e,t){d.filterText=t||"",d.setValue(h.stringRepeat("\n",e.length),-1),d.data=e||[],d.setRow(0)},d.getData=function(e){return d.data[e]},d.getRow=function(){return r.start.row},d.setRow=function(e){e=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,e)),r.start.row!=e&&(d.selection.clearSelection(),r.start.row=r.end.row=e||0,d.session._emit("changeBackMarker"),d.moveCursorTo(e||0,0),d.isOpen&&d._signal("select"))},d.on("changeSelection",function(){d.isOpen&&d.setRow(d.selection.lead.row),d.renderer.scrollCursorIntoView()}),d.hide=function(){this.container.style.display="none",d.anchorPos=null,d.anchor=null,d.isOpen&&(d.isOpen=!1,this._signal("hide"))},d.tryShow=function(e,t,n,i){if(!i&&d.isOpen&&d.anchorPos&&d.anchor&&d.anchorPos.top===e.top&&d.anchorPos.left===e.left&&d.anchor===n)return!0;var o=this.container,r=window.innerHeight,s=window.innerWidth,a=this.renderer,c=a.$maxLines*t*1.4,p={top:0,bottom:0,left:0},l=r-e.top-3*this.$borderSize-t,h=e.top-3*this.$borderSize,t=("top"===(n=n||(h<=l||c<=l?"bottom":"top"))?(p.bottom=e.top-this.$borderSize,p.top=p.bottom-c):"bottom"===n&&(p.top=e.top+t+this.$borderSize,p.bottom=p.top+c),0<=p.top&&p.bottom<=r);if(!i&&!t)return!1;a.$maxPixelHeight=t?null:"top"===n?h:l,"top"===n?(o.style.top="",o.style.bottom=r-p.bottom+"px",d.isTopdown=!1):(o.style.top=p.top+"px",o.style.bottom="",d.isTopdown=!0),o.style.display="";c=e.left;return c+o.offsetWidth>s&&(c=s-o.offsetWidth),o.style.left=c+"px",o.style.right="",d.isOpen||(d.isOpen=!0,this._signal("show"),u=null),d.anchorPos=e,d.anchor=n,!0},d.show=function(e,t,n){this.tryShow(e,t,n?"bottom":void 0,!0)},d.goTo=function(e){var t=this.getRow(),n=this.session.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=n<=t?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.setRow(t)},d.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},d.$imageSize=0,d.$borderSize=1,d}var o=e("../virtual_renderer").VirtualRenderer,r=e("../editor").Editor,p=e("../range").Range,l=e("../lib/event"),h=e("../lib/lang"),g=e("../lib/dom");g.importCssString("\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #CAD6FA;\n    z-index: 1;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #3a674e;\n}\n.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid #abbffe;\n    margin-top: -1px;\n    background: rgba(233,233,253,0.4);\n    position: absolute;\n    z-index: 2;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid rgba(109, 150, 13, 0.8);\n    background: rgba(58, 103, 78, 0.62);\n}\n.ace_completion-meta {\n    opacity: 0.5;\n    margin: 0 0.9em;\n}\n.ace_completion-message {\n    color: blue;\n}\n.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #2d69c7;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #93ca12;\n}\n.ace_editor.ace_autocomplete {\n    width: 300px;\n    z-index: 200000;\n    border: 1px lightgray solid;\n    position: fixed;\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n    line-height: 1.4;\n    background: #fefefe;\n    color: #111;\n}\n.ace_dark.ace_editor.ace_autocomplete {\n    border: 1px #484747 solid;\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\n    line-height: 1.4;\n    background: #25282c;\n    color: #c1c1c1;\n}\n.ace_autocomplete_right .ace_text-layer  {\n    width: calc(100% - 8px);\n}\n.ace_autocomplete_right .ace_line {\n    display: flex;\n}\n.ace_autocomplete_right .ace_completion-meta {\n    flex: 1;\n    text-align: right;\n}\n","autocompletion.css",!1),t.AcePopup=i,t.$singleLineEditor=c,t.getAriaId=a}),define("ace/autocomplete/inline",["require","exports","module","ace/snippets"],function(e,t,n){"use strict";var i=e("../snippets").snippetManager;function o(){this.editor=null}o.prototype.show=function(e,t,n){if(n=n||"",e&&this.editor&&this.editor!==e&&(this.hide(),this.editor=null),!e||!t)return!1;t=t.snippet?i.getDisplayTextForSnippet(e,t.snippet):t.value;return!(!t||!t.startsWith(n))&&(this.editor=e,""===(t=t.slice(n.length))?e.removeGhostText():e.setGhostText(t),!0)},o.prototype.isOpen=function(){return!!this.editor&&!!this.editor.renderer.$ghostText},o.prototype.hide=function(){return!!this.editor&&(this.editor.removeGhostText(),!0)},o.prototype.destroy=function(){this.hide(),this.editor=null},t.AceInline=o}),define("ace/autocomplete/util",["require","exports","module"],function(e,t,n){"use strict";t.parForEach=function(e,t,n){var i=0,o=e.length;0===o&&n();for(var r=0;r<o;r++)t(e[r],function(e,t){++i===o&&n(e,t)})};var r=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||r;for(var i=[],o=t-1;0<=o&&n.test(e[o]);o--)i.push(e[o]);return i.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,n){n=n||r;for(var i=[],o=t;o<e.length&&n.test(e[o]);o++)i.push(e[o]);return i},t.getCompletionPrefix=function(e){var t,n=e.getCursorPosition(),i=e.session.getLine(n.row);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!t&&e&&(t=this.retrievePrecedingIdentifier(i,n.column,e))}.bind(this))}.bind(this)),t||this.retrievePrecedingIdentifier(i,n.column)}}),define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],function(e,t,n){"use strict";function i(e,t){t.completer&&t.completer.destroy()}var o=e("./keyboard/hash_handler").HashHandler,r=e("./autocomplete/popup").AcePopup,s=e("./autocomplete/inline").AceInline,a=e("./autocomplete/popup").getAriaId,p=e("./autocomplete/util"),c=e("./lib/lang"),l=e("./lib/dom"),h=e("./snippets").snippetManager,d=e("./config"),u=(g.prototype.$init=function(){return this.popup=new r(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupChange.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},g.prototype.$initInline=function(){if(this.inlineEnabled&&!this.inlineRenderer)return this.inlineRenderer=new s,this.inlineRenderer},g.prototype.getPopup=function(){return this.popup||this.$init()},g.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip()},g.prototype.$onPopupChange=function(e){var t;this.inlineRenderer&&this.inlineEnabled&&(e=e?null:this.popup.getData(this.popup.getRow()),t=p.getCompletionPrefix(this.editor),this.inlineRenderer.show(this.editor,e,t)||this.inlineRenderer.hide(),this.$updatePopupPosition()),this.tooltipTimer.call(null,null)},g.prototype.$updatePopupPosition=function(){var e=this.editor,t=e.renderer,n=t.layerConfig.lineHeight,i=t.$cursorLayer.getPixelPosition(this.base,!0),o=(i.left-=this.popup.getTextLeftOffset(),e.container.getBoundingClientRect()),o=(i.top+=o.top-t.layerConfig.offset,i.left+=o.left-e.renderer.scrollLeft,i.left+=t.gutterWidth,{top:i.top,left:i.left});t.$ghostText&&t.$ghostTextWidget&&this.base.row===t.$ghostText.position.row&&(o.top+=t.$ghostTextWidget.el.offsetHeight),this.popup.tryShow(o,n,"bottom")||this.popup.tryShow(i,n,"top")||this.popup.show(i,n)},g.prototype.openPopup=function(e,t,n){this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:a(this.popup.getRow()),inline:this.inlineEnabled}),e.keyBinding.addKeyboardHandler(this.keyboardHandler),this.popup.setRow(this.autoSelect?0:-1),n?t||this.detach():(this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel()},g.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null},g.prototype.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},g.prototype.blurListener=function(e){var t=document.activeElement,n=this.editor.textInput.getElement(),i=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget),o=this.popup&&this.popup.container;t==n||t.parentNode==o||i||t==this.tooltipNode||e.relatedTarget==n||this.detach()},g.prototype.mousedownListener=function(e){this.detach()},g.prototype.mousewheelListener=function(e){this.detach()},g.prototype.goTo=function(e){this.popup.goTo(e)},g.prototype.insertMatch=function(e,t){if(!(e=e||this.popup.getData(this.popup.getRow())))return!1;var n=this.completions,e=this.getCompletionProvider().insertMatch(this.editor,e,n.filterText,t);return this.completions==n&&this.detach(),e},g.prototype.showPopup=function(e,t){this.editor&&this.detach(),this.activated=!0,(this.editor=e).completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,t)},g.prototype.getCompletionProvider=function(){return this.completionProvider||(this.completionProvider=new f),this.completionProvider},g.prototype.gatherCompletions=function(e,t){return this.getCompletionProvider().gatherCompletions(e,t)},g.prototype.updateCompletions=function(r,e){if(r&&this.base&&this.completions)return t=this.editor.getCursorPosition(),(n=this.editor.session.getTextRange({start:this.base,end:t}))==this.completions.filterText?void 0:(this.completions.setFilter(n),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=n||this.completions.filtered[0].snippet)?void this.openPopup(this.editor,n,r):this.detach());if(e&&e.matches)return t=this.editor.getSelectionRange().start,this.base=this.editor.session.doc.createAnchor(t.row,t.column),this.base.$insertRight=!0,this.completions=new m(e.matches),this.openPopup(this.editor,"",r);var e=this.editor.getSession(),t=this.editor.getCursorPosition(),n=p.getCompletionPrefix(this.editor),e=(this.base=e.doc.createAnchor(t.row,t.column-n.length),this.base.$insertRight=!0,{exactMatch:this.exactMatch});this.getCompletionProvider().provideCompletions(this.editor,e,function(e,t,n){var i=t.filtered,o=p.getCompletionPrefix(this.editor);if(n){if(!i.length)return this.detach();if(1==i.length&&i[0].value==o&&!i[0].snippet)return this.detach();if(this.autoInsert&&1==i.length)return this.insertMatch(i[0])}this.completions=t,this.openPopup(this.editor,o,r)}.bind(this))},g.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},g.prototype.updateDocTooltip=function(){var e=this.popup,t=e.data,n=t&&(t[e.getHoveredRow()]||t[e.getRow()]),i=null;if(!n||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var o=this.editor.completers.length,r=0;r<o;r++){var s=this.editor.completers[r];if(s.getDocTooltip&&n.completerId===s.id){i=s.getDocTooltip(n);break}}if(!(i="string"==typeof(i=i||"string"==typeof n?i:n)?{docText:i}:i)||!i.docHTML&&!i.docText)return this.hideDocTooltip();this.showDocTooltip(i)},g.prototype.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=l.createElement("div"),this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var t=this.editor.renderer.theme,t=(this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(t.isDark?"ace_dark ":"")+(t.cssClass||""),this.tooltipNode),e=(e.docHTML?t.innerHTML=e.docHTML:e.docText&&(t.textContent=e.docText),t.parentNode||document.body.appendChild(t),this.popup),n=e.container.getBoundingClientRect();t.style.top=e.container.style.top,t.style.bottom=e.container.style.bottom,t.style.display="block",window.innerWidth-n.right<320?n.left<320?(e.isTopdown?t.style.top=n.bottom+"px":t.style.top=e.container.offsetTop-t.offsetHeight+"px",t.style.left=n.left+"px",t.style.right="",t.style.bottom=""):(t.style.right=window.innerWidth-n.left+"px",t.style.left=""):(t.style.left=n.right+1+"px",t.style.right="")},g.prototype.hideDocTooltip=function(){var e;this.tooltipTimer.cancel(),this.tooltipNode&&(e=this.tooltipNode,this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e))},g.prototype.onTooltipClick=function(e){for(var t=e.target;t&&t!=this.tooltipNode;){if("A"==t.nodeName&&t.href){t.rel="noreferrer",t.target="_blank";break}t=t.parentNode}},g.prototype.destroy=function(){var e;this.detach(),this.popup&&(this.popup.destroy(),(e=this.popup.container)&&e.parentNode&&e.parentNode.removeChild(e)),this.editor&&this.editor.completer==this&&(this.editor.off("destroy",i),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},g);function g(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new o,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=c.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=c.delayedCall(this.updateDocTooltip.bind(this),50)}u.prototype.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},u.for=function(e){return e.completer instanceof u||(e.completer&&(e.completer.destroy(),e.completer=null),d.get("sharedPopups")?(u.$sharedInstance||(u.$sharedInstance=new u),e.completer=u.$sharedInstance):(e.completer=new u,e.once("destroy",i))),e.completer},u.startCommand={name:"startAutocomplete",exec:function(e,t){var n=u.for(e);n.autoInsert=!1,n.autoSelect=!0,n.showPopup(e,t),n.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};x.prototype.insertByIndex=function(e,t,n){return!(!this.completions||!this.completions.filtered)&&this.insertMatch(e,this.completions.filtered[t],n)},x.prototype.insertMatch=function(e,t,n){if(!t)return!1;if(e.startOperation({command:{name:"insertMatch"}}),t.completer&&t.completer.insertMatch)t.completer.insertMatch(e,t);else{if(!this.completions)return!1;if(this.completions.filterText)for(var i,o=e.selection.getAllRanges(),r=0;i=o[r];r++)i.start.column-=this.completions.filterText.length,e.session.remove(i);t.snippet?h.insertSnippet(e,t.snippet,t.range):this.$insertString(e,t),t.command&&"startAutocomplete"===t.command&&e.execCommand(t.command)}return e.endOperation(),!0},x.prototype.$insertString=function(t,n){var i=n.value||n;if(n.range){if(t.inVirtualSelectionMode)return t.session.replace(n.range,i);t.forEachSelection(function(){var e=t.getSelectionRange();0===n.range.compareRange(e)?t.session.replace(n.range,i):t.insert(i)},null,{keepOrder:!0})}else t.execCommand("insertstring",i)},x.prototype.gatherCompletions=function(n,i){var o=n.getSession(),r=n.getCursorPosition(),s=p.getCompletionPrefix(n),a=[],c=n.completers.length;return n.completers.forEach(function(e,t){e.getCompletions(n,o,r,s,function(e,t){!e&&t&&(a=a.concat(t)),i(null,{prefix:p.getCompletionPrefix(n),matches:a,finished:0==--c})})}),!0},x.prototype.provideCompletions=function(e,i,o){var n=function(e){var t=e.prefix,n=e.matches;this.completions=new m(n),i.exactMatch&&(this.completions.exactMatch=!0),i.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(t),(e.finished||this.completions.filtered.length)&&o(null,this.completions,e.finished)}.bind(this),r=!0,s=null;this.gatherCompletions(e,function(e,t){this.active&&(e&&(o(e,[],!0),this.detach()),0===t.prefix.indexOf(t.prefix)&&(r?s=t:n(t)))}.bind(this)),r=!1,s&&(e=s,s=null,n(e))},x.prototype.detach=function(){this.active=!1};var f=x,m=(b.prototype.setFilter=function(e){t=e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0)?this.filtered:this.all,this.filterText=e,t=(t=this.filterCompletions(t,this.filterText)).sort(function(e,t){return t.exactMatch-e.exactMatch||t.$score-e.$score||(e.caption||e.value).localeCompare(t.caption||t.value)});var t,n=null;t=t.filter(function(e){e=e.snippet||e.caption||e.value;return e!==n&&(n=e,!0)}),this.filtered=t},b.prototype.filterCompletions=function(e,t){var n=[],i=t.toUpperCase(),o=t.toLowerCase();e:for(var r,s=0;r=e[s];s++){var a=!this.ignoreCaption&&r.caption||r.value||r.snippet;if(a){var c=-1,p=0,l=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue}else{var h=a.toLowerCase().indexOf(o);if(-1<h)l=h;else for(var d=0;d<t.length;d++){var u=a.indexOf(o[d],c+1),g=a.indexOf(i[d],c+1);if((u=0<=u&&(g<0||u<g)?u:g)<0)continue e;0<(g=u-c-1)&&(-1===c&&(l+=10),l+=g,p|=1<<d),c=u}}r.matchMask=p,r.exactMatch=l?0:1,r.$score=(r.score||0)-l,n.push(r)}}return n},b);function b(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1,this.ignoreCaption=!1}function x(){this.active=!0}t.Autocomplete=u,t.CompletionProvider=f,t.FilteredList=m}),define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t,n){function s(e,t){var n=e.getTextRange(a.fromPoints({row:0,column:0},t)).split(c).length-1,i=e.getValue().split(c),o=Object.create(null),r=i[n];return i.forEach(function(e,t){e&&e!==r&&(t=Math.abs(n-t),t=i.length-t,o[e]?o[e]=Math.max(t,o[e]):o[e]=t)}),o}var a=e("../range").Range,c=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;t.getCompletions=function(e,t,n,i,o){var r=s(t,n);o(null,Object.keys(r).map(function(e){return{caption:e,value:e,score:r[e],meta:"local"}}))}}),define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,t,n){"use strict";function i(e,t){f(t.session.$mode)}function o(e){var t=e.editor,n=t.completer&&t.completer.activated;"backspace"===e.command.name?n&&!p.getCompletionPrefix(t)&&t.completer.detach():"insertstring"===e.command.name&&p.getCompletionPrefix(t)&&!n&&((e=r.for(t)).autoInsert=!1,e.showPopup(t))}var c=e("../snippets").snippetManager,r=e("../autocomplete").Autocomplete,s=e("../config"),a=e("../lib/lang"),p=e("../autocomplete/util"),l=e("../autocomplete/text_completer"),h={getCompletions:function(e,t,n,i,o){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,n,i,o);e=e.session.getState(n.row);o(null,t.$mode.getCompletions(e,t,n,i).map(function(e){return e.completerId=h.id,e}))},id:"keywordCompleter"},d={getCompletions:function(e,t,n,i,o){var r=[],t=t.getTokenAt(n.row,n.column),s=(t&&t.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?r.push("html-tag"):r=c.getActiveScopes(e),c.snippetMap),a=[];r.forEach(function(e){for(var t=s[e]||[],n=t.length;n--;){var i=t[n],o=i.name||i.tabTrigger;o&&a.push({caption:o,snippet:i.content,meta:i.tabTrigger&&!i.name?i.tabTrigger+"⇥ ":"snippet",completerId:d.id})}},this),o(null,a)},getDocTooltip:function(e){var o;e.snippet&&!e.docHTML&&(e.docHTML=["<b>",a.escapeHTML(e.caption),"</b>","<hr></hr>",a.escapeHTML((e=e.snippet,o={},e.replace(/\${(\d+)(:(.*?))?}/g,function(e,t,n,i){return o[t]=i||""}).replace(/\$(\d+?)/g,function(e,t){return o[t]})))].join(""))},id:"snippetCompleter"},u=[d,l,h],g=(t.setCompleters=function(e){u.length=0,e&&u.push.apply(u,e)},t.addCompleter=function(e){u.push(e)},t.textCompleter=l,t.keyWordCompleter=h,t.snippetCompleter=d,{name:"expandSnippet",exec:function(e){return c.expandWithTab(e)},bindKey:"Tab"}),f=function(e){(e="string"==typeof e?s.$modes[e]:e)&&(c.files||(c.files={}),m(e.$id,e.snippetFileId),e.modes&&e.modes.forEach(f))},m=function(t,e){e&&t&&!c.files[t]&&(c.files[t]={},s.loadModule(e,function(e){e&&(!(c.files[t]=e).snippets&&e.snippetText&&(e.snippets=c.parseSnippetFile(e.snippetText)),c.register(e.snippets||[],e.scope),e.includeScopes&&(c.snippetMap[e.scope].includeScopes=e.includeScopes,e.includeScopes.forEach(function(e){f("ace/mode/"+e)})))}))},l=e("../editor").Editor;e("../config").defineOptions(l.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:u),this.commands.addCommand(r.startCommand)):this.commands.removeCommand(r.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:u),this.commands.on("afterExec",o)):this.commands.removeListener("afterExec",o)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(g),this.on("changeMode",i),i(0,this)):(this.commands.removeCommand(g),this.off("changeMode",i))},value:!1}})}),window.require(["ace/ext/language_tools"],function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)});